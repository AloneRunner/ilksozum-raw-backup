<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>i18n Test - Ä°lk SÃ¶zÃ¼m</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      color: #667eea;
      margin-top: 0;
    }
    .lang-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .lang-btn {
      padding: 10px 20px;
      border: 2px solid #667eea;
      background: white;
      color: #667eea;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s;
    }
    .lang-btn:hover {
      background: #667eea;
      color: white;
    }
    .lang-btn.active {
      background: #667eea;
      color: white;
      font-weight: bold;
    }
    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .test-section h2 {
      margin-top: 0;
      color: #764ba2;
      font-size: 18px;
    }
    .test-item {
      display: grid;
      grid-template-columns: 200px 1fr;
      gap: 15px;
      margin-bottom: 10px;
      padding: 10px;
      background: white;
      border-radius: 6px;
    }
    .test-key {
      font-family: 'Courier New', monospace;
      color: #666;
      font-size: 13px;
    }
    .test-value {
      font-weight: 500;
      color: #333;
    }
    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .status.ok {
      background: #d4edda;
      color: #155724;
    }
    .status.missing {
      background: #f8d7da;
      color: #721c24;
    }
    .error {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ§ª i18n ModÃ¼ler YapÄ± - Uygulama Testi</h1>
    
    <div class="lang-selector">
      <button class="lang-btn active" data-lang="tr">ðŸ‡¹ðŸ‡· TÃ¼rkÃ§e</button>
      <button class="lang-btn" data-lang="en">ðŸ‡¬ðŸ‡§ English</button>
      <button class="lang-btn" data-lang="de">ðŸ‡©ðŸ‡ª Deutsch</button>
      <button class="lang-btn" data-lang="fr">ðŸ‡«ðŸ‡· FranÃ§ais</button>
      <button class="lang-btn" data-lang="nl">ðŸ‡³ðŸ‡± Nederlands</button>
      <button class="lang-btn" data-lang="az">ðŸ‡¦ðŸ‡¿ AzÉ™rbaycan</button>
    </div>

    <div id="test-results"></div>
  </div>

  <script type="module">
    // Test edilecek anahtarlar (gerÃ§ek i18n yapÄ±nÄ±zdan)
    const TEST_KEYS = {
      'App & Common': [
        'app.back',
        'app.developing',
        'menu.appTitle',
        'tabs.activities',
        'tabs.communication',
        'tabs.achievements',
        'tabs.settings',
        'common.previous',
        'common.next'
      ],
      'Settings & Themes': [
        'settings.language',
        'settings.languageSubtitle',
        'themes.simple',
        'themes.balon',
        'themes.gunes',
        'consent.title',
        'consent.accept'
      ],
      'Menu Items': [
        'menu.letterSound.title',
        'menu.objects.title',
        'menu.concepts.title',
        'menu.reasoning.title',
        'menu.fineMotor.title',
        'menu.fiveWOneH.title'
      ],
      'Achievements & Reports': [
        'achievements.title',
        'achievements.subtitle',
        'achievements.categories.letterSound',
        'achievements.categories.reasoning',
        'completion.heading',
        'completion.home'
      ],
      'Activity Feedback': [
        'choice.readQuestion',
        'choice.showLabel',
        'choice.hideLabel',
        'feedback.correctPrefix',
        'feedback.wrongPrefix'
      ]
    };

    let currentLang = 'tr';
    let translations = {};

    // ModÃ¼ler i18n dosyalarÄ±nÄ± yÃ¼kle
    async function loadTranslations(lang) {
      try {
        const [common, screens, letterActivities, gameActivities, content] = await Promise.all([
          fetch(`./src/i18n/${lang}/common.json`).then(r => r.json()),
          fetch(`./src/i18n/${lang}/screens.json`).then(r => r.json()),
          fetch(`./src/i18n/${lang}/letterActivities.json`).then(r => r.json()),
          fetch(`./src/i18n/${lang}/gameActivities.json`).then(r => r.json()),
          fetch(`./src/i18n/${lang}/content.json`).then(r => r.json())
        ]);

        return {
          ...common,
          ...screens,
          ...letterActivities,
          ...gameActivities,
          ...content
        };
      } catch (error) {
        throw new Error(`${lang} dili yÃ¼klenemedi: ${error.message}`);
      }
    }

    // Nested key'leri al
    function getNestedValue(obj, path) {
      return path.split('.').reduce((current, key) => current?.[key], obj);
    }

    // Test sonuÃ§larÄ±nÄ± render et
    function renderTests() {
      const resultsDiv = document.getElementById('test-results');
      let html = '';

      for (const [section, keys] of Object.entries(TEST_KEYS)) {
        html += `<div class="test-section">
          <h2>${section}</h2>`;

        for (const key of keys) {
          const value = getNestedValue(translations, key);
          const status = value ? 'ok' : 'missing';
          const statusText = value ? 'âœ“' : 'âœ— Eksik';

          html += `<div class="test-item">
            <div class="test-key">${key}</div>
            <div class="test-value">
              ${value || '<em>Ã‡eviri bulunamadÄ±</em>'}
              <span class="status ${status}">${statusText}</span>
            </div>
          </div>`;
        }

        html += '</div>';
      }

      resultsDiv.innerHTML = html;
    }

    // Dil deÄŸiÅŸtir
    async function changeLang(lang) {
      currentLang = lang;
      
      // Buton stillerini gÃ¼ncelle
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });

      try {
        translations = await loadTranslations(lang);
        renderTests();
      } catch (error) {
        document.getElementById('test-results').innerHTML = 
          `<div class="error"><strong>Hata:</strong> ${error.message}</div>`;
      }
    }

    // Event listeners
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => changeLang(btn.dataset.lang));
    });

    // Ä°lk yÃ¼kleme
    changeLang('tr');
  </script>
</body>
</html>
